@model ViewModels.Product.ProductDetailsViewModel

@using Utilities.Helpers

@{
    ViewBag.Title = ViewBag.MetaTitle;
    ViewBag.Description = ViewBag.MetaDescription;
}

@section Styles{
    @*<link href="~/Content/Site.css" rel="stylesheet" />*@
    @*<link href="~/assets/vendor/slick.css" rel="stylesheet" />*@
    <link href="~/assets/css/addReviewStyle.css" rel="stylesheet" />
    @if (System.Threading.Thread.CurrentThread.CurrentCulture.ToString() == "fa-IR")
    {
        <style>
            div.accordion {
                direction: rtl;
            }

            .slider-for {
                direction: ltr;
            }

            .upsell-product {
                direction: ltr;
            }

            .product-details-content .options input {
                padding-right: 20px;
                text-align: right;
            }

            div.col-md-5 {
                float: right;
            }
        </style>
    }
}

@section Slider
{
    <div class="container">
        <div class="banner-header banner-lbook3 space-30">
            <img src="/assets/images/banner-mansory.jpg" alt="Banner-header">
            <div class="text">
                <h3>@Resources.Resource.AllProducts</h3>
                <p><a href="#" title="Home">@Resources.Resource.Home</a><i class="fa fa-caret-right"></i>@Resources.Resource.AllProducts</p>
            </div>
        </div>
    </div>
}

<div class="container">
    <div class="product-details-content">
        <div class="col-md-6 col-sm-6">
            <div class="slider-for">
                @foreach (var item in ViewBag.Gallery)
                {
                    <div>
                        <span class="zoom">
                            @*<img class="zoom-images" src="~/Images/Products/Original/@item" alt="@item">*@
                            @{ var imageName = (string)item.ImageName; }
                            @Html.DrawWebPImage("zoom-images", "", "/Images/Products/Original/" + imageName, imageName)
                        </span>
                    </div>
                }
            </div>
            <!-- End slider-for -->
            <div class="slider-nav">
                @foreach (var item in ViewBag.Gallery)
                {
                    <div>
                        @*<img src="~/Images/Products/Thumb/@item" alt="@item">*@
                        @{ var imageName = (string)item.ImageName; }
                        @Html.DrawWebPImage("", "", "/Images/Products/Thumb/" + imageName, imageName)
                    </div>
                }
            </div>
        </div>
        <div class="col-md-6 col-sm-6">
            <div class="box-details-info">
                <div class="product-name">
                    <h2>@Model.Title</h2>
                </div>
                <!-- End product-name -->
                <div class="rating">
                    <div class="overflow-h">
                        <div class="icon-rating">

                            @if (ViewBag.Rating < 2)
                            {
                                <input type="radio" id="star-horizontal-rating-1" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-1"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-2" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-2"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-3" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-3"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-4" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-4"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-5" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-5"><i class="fa fa-star"></i></label>
                            }
                            @if (ViewBag.Rating >= 2 && ViewBag.Rating < 3)
                            {
                                <input type="radio" id="star-horizontal-rating-1" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-1"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-2" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-2"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-3" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-3"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-4" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-4"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-5" name="star-horizontal-rating">
                                <label for="star-horizontal-rating-5"><i class="fa fa-star"></i></label>
                            }
                            @if (ViewBag.Rating >= 3 && ViewBag.Rating < 4)
                            {
                                <input type="radio" id="star-horizontal-rating-1" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-1"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-2" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-2"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-3" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-3"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-4" name="star-horizontal-rating">
                                <label for="star-horizontal-rating-4"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-5" name="star-horizontal-rating">
                                <label for="star-horizontal-rating-5"><i class="fa fa-star"></i></label>
                            }
                            @if (ViewBag.Rating >= 4 && ViewBag.Rating < 5)
                            {
                                <input type="radio" id="star-horizontal-rating-1" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-1"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-2" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-2"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-3" name="star-horizontal-rating">
                                <label for="star-horizontal-rating-3"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-4" name="star-horizontal-rating">
                                <label for="star-horizontal-rating-4"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-5" name="star-horizontal-rating">
                                <label for="star-horizontal-rating-5"><i class="fa fa-star"></i></label>
                            }
                            @if (ViewBag.Rating == 5)
                            {
                                <input type="radio" id="star-horizontal-rating-1" name="star-horizontal-rating" checked="">
                                <label for="star-horizontal-rating-1"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-2" name="star-horizontal-rating">
                                <label for="star-horizontal-rating-2"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-3" name="star-horizontal-rating">
                                <label for="star-horizontal-rating-3"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-4" name="star-horizontal-rating">
                                <label for="star-horizontal-rating-4"><i class="fa fa-star"></i></label>
                                <input type="radio" id="star-horizontal-rating-5" name="star-horizontal-rating">
                                <label for="star-horizontal-rating-5"><i class="fa fa-star"></i></label>
                            }
                        </div>
                    </div>
                </div>
                <!-- End Rating -->
                <div class="wrap-price">
                    @if (Model.DiscountPercent != 0)
                    {
                        <p class="price-old">@Model.Fee.ToString("#,0") ريال</p>
                    }

                    @{ var dis = ((double)(100 - Model.DiscountPercent) / 100);
                    <p class="product-price">@Utilities.Helpers.MathExtensions.Round((Model.Fee * dis), -4).ToString("#,0") ريال</p>
                    }
                </div>
                <!-- End Price -->
            </div>
            <!-- End box details info -->
            <div class="options box space-30">
                <p>@Model.Text</p>

                <!-- End action -->
                @*<div class="title">
                        <h3>COLOR</h3>
                    </div>
                    <div class="select-color box space-30">
                        <span class="active color1">1</span>
                        <span class="color2">2</span>
                        <span class="color3">3</span>
                        <span class="color4">4</span>
                        <span class="color5">5</span>
                        <span class="color6">6</span>
                        <span class="color7">7</span>
                        <span class="color8">8</span>
                        <span class="color9">9</span>
                    </div>*@
                <!-- End select color -->
                <div class="box space-30">
                    <div class="row">
                        <div class="col-md-5">
                            <div class="title">
                                <h3>@Resources.Resource.Size</h3>
                            </div>
                            @Html.DropDownListFor(model => model.SizeId, (IEnumerable<SelectListItem>)ViewBag.SizeId, @Resources.Resource.SelectSize, new { @onchange = "GetQuantityOfSize()" })
                            @*<form enctype="multipart/form-data">
                                    <select name="select_size">
                                        <option value="Select size">Select size</option>
                                        <option value="S">S</option>
                                        <option value="M">M</option>
                                        <option value="L">L</option>
                                        <option value="XL">XL</option>
                                        <option value="XXL">XXL</option>
                                    </select>
                                </form>*@
                        </div>
                        <!-- End col-md-6 -->
                        <div class="col-md-5">
                            <div class="title">
                                <h3>@Resources.Resource.Quantity</h3>
                            </div>
                            <form enctype="multipart/form-data">
                                <input id="Quantity" data-step="1" value="1" title="Qty" min="1" size="4" type="number" onchange="GetQuantityOfSize()">
                            </form>
                        </div>
                        <!-- End col-md-5 -->
                    </div>
                    <!-- End row -->
                </div>
                <!-- End row -->
                <div class="action">
                    <a class="link-v1 add-cart" title="@Resources.Resource.AddToCart" href="javascript:void(0)" onclick="return AddToCart()"><span>@Resources.Resource.AddToCart</span></a>
                    <span id="AddToWishList">
                        @Html.Action("ShowWishListIcon", "Product")
                    </span>

                    <div id="loadingImage" style="display:none">
                        <img src="~/Images/loadingImage.gif" alt="loadingImage" />
                    </div>
                    @*<a class="link-v1 chart" title="Compare" href="#"><i class="icon icon-magnifier"></i></a>*@

                    <span id="itemAdded">@Resources.Resource.ItemAdded</span>
                    <div id="error" class="text-danger">@Resources.Resource.PleaseChooseASize</div>
                </div>
            </div>
            <!-- End Options -->

            <div class="accordion box space-100">

                <!-- Accordion v2 -->
                <div class="accordion accordion-v2">
                    <div class="panel-group" id="accordion-v2">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#accordion-v2" href="#collapse-v2-One" aria-expanded="true" class="">
                                        @Resources.Resource.Description
                                    </a>
                                </h4>
                            </div>
                            <div id="collapse-v2-One" class="panel-collapse active collapse in">
                                <div class="panel-body">
                                    @Model.ShortDescription
                                </div>
                            </div>
                        </div>
                        @*<div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a class="collapsed" data-toggle="collapse" data-parent="#accordion-v2" href="#collapse-v2-Two" aria-expanded="false">
                                            @Resources.Resource.Comment
                                        </a>
                                    </h4>
                                </div>
                                <div id="collapse-v2-Two" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        @Model.Comment
                                    </div>
                                </div>
                            </div>*@
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a class="" data-toggle="collapse" data-parent="#accordion-v2" href="#collapse-v2-Three" aria-expanded="false">
                                        @Resources.Resource.Reviews
                                    </a>
                                </h4>
                            </div>
                            <div id="collapse-v2-Three" class="panel-collapse collapse in" style="height: auto;">
                                <div id="customer">
                                    <div id="reviews">
                                        @Html.Action("ShowReviews", "Product")
                                    </div>

                                    @if (User.Identity.IsAuthenticated)
                                    {
                                        @Html.Action("AddReview", "Product")
                                    }
                                    else
                                    {
                                        <div class="alert alert-danger" id="danger">@Resources.Resource.ToAddReviewSignIn <a href="/Login?ReturnUrl=Products/@Model.ProductId">@Resources.Resource.SignInToAddComment</a> @Resources.Resource.Do</div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Accordion v2 -->
                @*<div class="social box">
                        <h3>@Resources.Resource.ShareThis</h3>
                        <a class="twitter" href="#" title="social"><i class="fa fa-twitter-square"></i></a>
                        <a class="dribbble" href="#" title="social"><i class="fa fa-dribbble"></i></a>
                        <a class="skype" href="#" title="social"><i class="fa fa-skype"></i></a>
                        <a class="pinterest" href="#" title="social"><i class="fa fa-pinterest"></i></a>
                        <a class="facebook" href="#" title="social"><i class="fa fa-facebook-square"></i></a>
                    </div>*@
                <!-- End share -->
            </div>
            <!-- End col-md-6 -->
        </div>
    </div>
    <!-- End product-details-content -->
    <div class="title-text-v2 space-60">
        <h3>@Resources.Resource.RelatedProducts</h3>
    </div>
    <!-- End title -->
    <!-- Related Products -->
    <div class="upsell-product products ver2 furniture hover-shadow">

        @foreach (var item in ViewBag.RelatedProducts as IEnumerable<ECommerceWebsite.Models.Products>)
        {
            <div class="item-inner">
                <div class="product">
                    <div class="product-images">
                        <a href="/Products/@item.ProductId" title="product-images">
                            @*<img class="primary_image" src="~/Images/Products/Original/@item.ImageName" alt="@item.ImageName" />*@
                            @{ var imageName = (string)item.ImageName; }
                            @Html.DrawWebPImage("primary_image", "", "/Images/Products/Original/" + imageName, imageName)
                        </a>
                        @*<div class="action">
                            <a class="wish" href="#" title="Wishlist"><i class="icon icon-heart"></i></a>
                            <a class="zoom" href="/Products/@item.ProductId" title="Quick view"><i class="icon icon-magnifier-add "></i></a>
                            <a class="add-cart" href="#" title="Add to cart"><i class="icon-bag"></i></a>
                        </div>*@
                        <!-- End action -->
                    </div>
                    <a href="/Products/@item.ProductId" title="@item.Title"><p class="product-title">@item.Title</p></a>
                    @if (Model.DiscountPercent != 0)
                    {
                        <p class="product-price-old">ريال @item.Fee.ToString("#,0")</p>
                    }
                    @{ var discount = ((double)(100 - item.DiscountPercent) / 100);
                    <p class="product-price">@Utilities.Helpers.MathExtensions.Round((item.Fee * discount), -4).ToString("#,0") ريال</p>
                    }
                </div>
                <!-- End product -->
            </div>
        }
    </div>

    <!-- End Related Products -->
</div>

@section Scripts{
    @*<script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script type="text/javascript" src="~/assets/js/slick.min.js"></script>
    <script type="text/javascript" src="~/assets/js/jquery.zoom.js"></script>*@
    <script>
        var productId = @Model.ProductId;
        var lang = '@System.Threading.Thread.CurrentThread.CurrentCulture.ToString()';
        var isFavourite = '@Model.IsFavourite';
    </script>
    @*<script src="~/Scripts/My Scripts/ShowProductDetails.js"></script>*@

    <script type="text/javascript">
        $(document).on('ready', function () {
            $('.slider-for').slick({
                slidesToShow: 1,
                slidesToScroll: 1,
                arrows: false,
                asNavFor: '.slider-nav'
            });
            $('.slider-nav').slick({
                slidesToShow: 4,
                slidesToScroll: 1,
                asNavFor: '.slider-for',
                dots: false,
                focusOnSelect: true
            });
            $('.zoom').zoom();
        });
    </script>

    @Scripts.Render("~/bundles/productdetails")

}